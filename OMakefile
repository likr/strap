CREATE_SUBDIRS = true

CXX = clang++
CXXFLAGS += -Wall -std=c++11 -stdlib=libc++
INCLUDES += $(absname src)

section
	CXXFLAGS += -g
	vmount(src, debug)
	.SUBDIRS: debug

section
	CXXFLAGS += -O3
	vmount(src, release)
	.SUBDIRS: release

LDFLAGS[] +=
	-lClp
	-lCoinUtils

section
	LIBS[] +=
		debug/common/libcommon
		debug/mckp/libmckp
		debug/mmkp/libmmkp
	debug: $(CXXProgram strapmain-debug, debug/main/main)

section
	LIBS[] +=
		release/common/libcommon
		release/mckp/libmckp
		release/mmkp/libmmkp
	release: $(CXXProgram strapmain, release/main/main)

CXXProgram(entropy, release/main/entropy)

.PHONY: clean
.DEFAULT: release

clean:
	rm -rf debug release
